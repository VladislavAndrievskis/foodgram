services:
  frontend:
    container_name: foodgram-front
    build: ../frontend
    ports:
      - "3000:3000"

  nginx:
    container_name: foodgram-proxy
    image: nginx:1.25.4-alpine
    ports:
      - "80:80"
    volumes:
      - ./nginx.conf.template:/etc/nginx/nginx.conf
      - ../frontend/build:/usr/share/nginx/html
      - ../docs/:/usr/share/nginx/html/api/docs
    extra_hosts:
      - "host.docker.internal:host-gateway"
    restart: on-failure
